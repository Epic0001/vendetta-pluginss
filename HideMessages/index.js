(function(_,i,e,f,a,V,o,h,Y,c){"use strict";var A={Failed:a.getAssetIDByName("Small"),Delete:a.getAssetIDByName("ic_message_delete"),Copy:a.getAssetIDByName("toast_copy_link"),Open:a.getAssetIDByName("ic_leave_stage"),Clipboard:a.getAssetIDByName("pending-alert"),Clock:a.getAssetIDByName("clock"),Forum:a.getAssetIDByName("ic_forum_channel"),Settings:{Toasts:{Settings:a.getAssetIDByName("ic_selection_checked_24px"),Failed:a.getAssetIDByName("ic_close_circle_24px")},Initial:a.getAssetIDByName("coffee"),Update:a.getAssetIDByName("discover"),Locale:a.getAssetIDByName("ic_locale_24px"),External:a.getAssetIDByName("ic_raised_hand_list"),Edit:a.getAssetIDByName("ic_edit_24px"),Reply:a.getAssetIDByName("ic_reply_24px")}},p={shadow:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:t,shadowRadius:4.65,elevation:8}},displayToast:function(t,s){e.toasts.open({content:s=="clipboard"?`Copied ${t} to clipboard.`:t,source:s=="clipboard"?A.Clipboard:A.Settings.Initial})}},m={plugin:{source:"https://github.com/MYSTRAVIL/vendetta-plugins"},author:{profile:{MYSTRAVIL:"https://github.com/mystravil"}}};const{TouchableOpacity:I,View:S,Image:H,Text:D,Animated:y}=h.General,N=i.findByProps("transitionToGuild"),L=i.findByStoreName("UserStore"),G=i.findByProps("showUserProfile"),l=e.stylesheet.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...p.shadow()},image:{width:75,height:75,borderRadius:10,...p.shadow()},mainText:{opacity:.975,letterSpacing:.25},header:{color:c.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:c.semanticColors.HEADER_SECONDARY,fontSize:12.75}});function z(t){let{name:s,authors:n}=t;const r=e.React.useRef(new y.Value(1)).current,g=function(){return y.spring(r,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},d=function(){return y.spring(r,{toValue:1,duration:250,useNativeDriver:!0}).start()},x=function(){return G.showUserProfile({userId:L.getCurrentUser().id})},C={transform:[{scale:r}]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(S,{style:l.container},e.React.createElement(I,{onPress:x,onPressIn:g,onPressOut:d},e.React.createElement(y.View,{style:C},e.React.createElement(H,{style:[l.image],source:{uri:L?.getCurrentUser()?.getAvatarURL()?.replace("webp","png")}}))),e.React.createElement(S,{style:l.textContainer},e.React.createElement(I,{onPress:function(){return N.openURL(m.plugin.source)}},e.React.createElement(D,{style:[l.mainText,l.header]},s)),e.React.createElement(S,{style:{flexDirection:"row"}},e.React.createElement(D,{style:[l.mainText,l.subHeader]},"A project by"),n.map(function(v,M,u){return e.React.createElement(I,{onPress:function(){return N.openURL(m.author.profile[v.name]??"https://github.com/")}},e.React.createElement(D,{style:[l.mainText,l.subHeader,{paddingLeft:4,fontFamily:e.constants.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},v.name,M<u.length-1?",":null))})))))}const{View:k,Text:W}=h.General,F=e.stylesheet.createThemedStyleSheet({text:{color:c.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:12}});function O(t){let{label:s,children:n}=t;return e.React.createElement(k,{style:{marginTop:10}},e.React.createElement(W,{style:[F.text,F.optionText]},s.toUpperCase()),n)}const{FormRow:B,FormDivider:j,FormInput:K,FormText:X}=h.Forms,{ScrollView:q,View:P,Text:J}=h.General,Q=i.findByProps("transitionToGuild","openURL"),R=e.stylesheet.createThemedStyleSheet({icon:{color:c.semanticColors.INTERACTIVE_NORMAL},item:{color:c.semanticColors.TEXT_MUTED,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:c.semanticColors.BACKGROUND_MOBILE_SECONDARY,...p.shadow()},subheaderText:{color:c.semanticColors.HEADER_SECONDARY,textAlign:"center",margin:10,marginBottom:50,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:14},image:{width:"100%",maxWidth:350,borderRadius:10}});function Z(){return Y.useProxy(o.storage),e.React.createElement(q,null,e.React.createElement(z,{name:o.manifest.name,authors:o.manifest.authors}),e.React.createElement(P,{style:{marginTop:20}},e.React.createElement(O,{label:"Preferences"},e.React.createElement(P,{style:[R.container]},e.React.createElement(K,{value:o.storage.hideMessagesIndex,onChange:function(t){o.storage.hideMessagesIndex=t},placeholder:"2",title:"Position Index"}),e.React.createElement(j,null),e.React.createElement(X,{style:{padding:10}},'The index at which the "Hide Message" Button will be inserted. 2 by default.'))),e.React.createElement(O,{label:"Source"},e.React.createElement(P,{style:R.container},e.React.createElement(B,{label:"Source",subLabel:`Open the repository of ${o.manifest.name} externally.`,onLongPress:function(){return p.displayToast(`Opens the repository of ${o.manifest.name} on GitHub in an external page to view any source code of the plugin.`,"tooltip")},leading:e.React.createElement(B.Icon,{style:R.icon,source:A.Open}),trailing:function(){return e.React.createElement(B.Arrow,null)},onPress:function(){return Q.openURL(m.plugin.source)}})))),e.React.createElement(J,{style:R.subheaderText},`Build: (${o.manifest.hash.substring(0,8)})`))}const{ActionSheetRow:b}=i.findByProps("ActionSheetRow"),{FormRow:U}=i.findByProps("FormRow");function ee(t){let{label:s,icon:n,onPress:r}=t;const g=e.stylesheet.createThemedStyleSheet({iconComponent:{width:24,height:24,tintColor:c.semanticColors.INTERACTIVE_NORMAL}});return b?React.createElement(b,{label:s,icon:React.createElement(b.Icon,{source:n,IconComponent:function(){return React.createElement(e.ReactNative.Image,{resizeMode:"cover",style:g.iconComponent,source:n})}}),onPress:r}):React.createElement(U,{label:s,leading:React.createElement(U.Icon,{source:n}),onPress:r})}i.findByProps("showUserProfile"),i.findByProps("fetchProfile"),i.findByStoreName("UserStore"),i.findByProps("TextStyleSheet");let E=[];const T=i.findByProps("openLazy","hideActionSheet"),w=i.findByProps("startEditMessage","editMessage"),te=i.findByProps("getMessage","getMessages"),ne=i.findByProps("getChannel","getDMFromUserId");function ae(){let t=!1;E.push(f.before("openLazy",T,function(s){let[n,r,g]=s;const d=g?.message;r!=="MessageLongPressActionSheet"||!d||n.then(function(x){const C=f.after("default",x,function(v,M){e.React.useEffect(function(){return function(){C()}},[]);const u=V.findInReactTree(M,function(se){return se?.[0]?.type?.name==="ButtonRow"});if(!u)return;u.splice(o.storage.hideMessagesIndex||2,0,e.React.createElement(ee,{label:"Hide Message",icon:a.getAssetIDByName("ic_close_16px"),onPress:function(){e.FluxDispatcher.dispatch({type:"MESSAGE_DELETE",channelId:d.channel_id,id:d.id,__vml_cleanup:!0,otherPluginBypass:!0}),T.hideActionSheet()}}));const $=u[0]?.type;$&&u.splice(0,0,e.React.createElement($,{key:"69",onPressRow:function(){T.hideActionSheet(),w.startEditMessage(`dirty-${d.channel_id}`,d.id,d.content)},message:"Spoof message",iconSource:a.getAssetIDByName("ic_message_retry")}))})})})),E.push(f.before(w,"startEditMessage",function(s,n){n[0].startsWith("dirty-")?(n[0]=n[0].replace("dirty-",""),t=!0):t=!1})),E.push(f.before(w,"editMessage",function(s,n){if(t){const r=te.getMessage(n[0],n[1]);e.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...r,...n[2],edited_timestamp:r.editedTimestamp,mention_roles:r.mentionRoles,mention_everyone:r.mentionEveryone,member:r.author,guild_id:ne.getChannel(r.channel_id).guild_id},log_edit:!1}),n.length=0}}))}function re(){for(const t of E)t()}var ie={onLoad:ae,onUnload:re,settings:Z};return _.default=ie,Object.defineProperty(_,"__esModule",{value:!0}),_})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.plugin,vendetta.ui.components,vendetta.storage,vendetta.ui);
